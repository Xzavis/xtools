<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Snippet - XTools</title>
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- shadcn Theme -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/shadcn-theme.css') }}">
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    
    <style>
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .page-title {
            font-size: 1.875rem;
            font-weight: 600;
            letter-spacing: -0.025em;
            color: hsl(var(--foreground));
        }

        /* Snippet Header */
        .snippet-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid hsl(var(--border));
        }

        .snippet-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: hsl(var(--foreground));
            margin-bottom: 0.5rem;
        }

        .snippet-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        /* Code Block */
        .code-block {
            background: hsl(var(--muted));
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background: hsl(var(--border));
            border-bottom: 1px solid hsl(var(--border));
        }

        .code-lang {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: hsl(var(--muted-foreground));
        }

        .code-actions {
            display: flex;
            gap: 0.5rem;
        }

        .code-content {
            padding: 1.5rem;
            overflow-x: auto;
        }

        .code-content pre {
            margin: 0;
            background: transparent !important;
        }

        /* Info Cards */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .info-card {
            background: hsl(var(--muted));
            border-radius: var(--radius-md);
            padding: 1rem;
        }

        .info-label {
            font-size: 0.75rem;
            color: hsl(var(--muted-foreground));
            margin-bottom: 0.25rem;
        }

        .info-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: hsl(var(--foreground));
        }

        /* Warning Alert */
        .alert {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            border-radius: var(--radius-md);
            margin-bottom: 1.5rem;
        }

        .alert-warning {
            background: hsl(var(--warning));
            color: hsl(var(--warning-foreground));
        }

        .alert-destructive {
            background: hsl(var(--destructive) / 0.1);
            color: hsl(var(--destructive));
            border: 1px solid hsl(var(--destructive) / 0.2);
        }

        .alert-icon {
            flex-shrink: 0;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .alert-description {
            font-size: 0.875rem;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    {% include 'sidebar.html' %}

    <div class="main-content">
        <!-- Header -->
        <div class="page-header">
            <div>
                <h1 class="page-title">View Snippet</h1>
            </div>
            <div style="display: flex; gap: 0.5rem;">
                <a href="/pastebin" class="btn btn-outline">
                    <i data-lucide="arrow-left" style="width: 16px; height: 16px;"></i>
                    Back to Lab
                </a>
                <button class="btn btn-primary" onclick="copySnippet()">
                    <i data-lucide="copy" style="width: 16px; height: 16px;"></i>
                    Copy
                </button>
            </div>
        </div>

        <!-- Warning if expiring soon -->
        <div class="alert alert-warning" id="expiryWarning">
            <i data-lucide="clock" class="alert-icon" style="width: 20px; height: 20px;"></i>
            <div>
                <div class="alert-title">Expiring Soon</div>
                <div class="alert-description">This snippet will expire in 2 hours and 15 minutes.</div>
            </div>
        </div>

        <!-- Snippet Details -->
        <div class="card">
            <div class="card-content">
                <div class="snippet-header">
                    <div>
                        <div class="snippet-title">API Configuration Example</div>
                        <div class="snippet-meta">
                            <span class="meta-item">
                                <i data-lucide="calendar" style="width: 14px; height: 14px;"></i>
                                Created 2 days ago
                            </span>
                            <span class="meta-item">
                                <i data-lucide="clock" style="width: 14px; height: 14px;"></i>
                                Expires in 2h 15m
                            </span>
                            <span class="meta-item">
                                <i data-lucide="eye" style="width: 14px; height: 14px;"></i>
                                42 views
                            </span>
                        </div>
                    </div>
                    <span class="badge badge-primary">Python</span>
                </div>

                <!-- Code Block -->
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">python</span>
                        <div class="code-actions">
                            <button class="btn btn-sm btn-ghost" onclick="copyCode()">
                                <i data-lucide="copy" style="width: 14px; height: 14px;"></i>
                            </button>
                            <button class="btn btn-sm btn-ghost" onclick="downloadCode()">
                                <i data-lucide="download" style="width: 14px; height: 14px;"></i>
                            </button>
                        </div>
                    </div>
                    <div class="code-content">
                        <pre><code class="language-python" id="snippetCode">import os
from typing import Dict, Optional

class APIConfig:
    """Configuration class for API settings."""
    
    def __init__(self, env: str = 'development'):
        self.env = env
        self.config = self._load_config()
    
    def _load_config(self) -> Dict[str, str]:
        """Load configuration from environment variables."""
        return {
            'api_key': os.getenv('API_KEY'),
            'base_url': os.getenv('API_URL', 'https://api.example.com'),
            'timeout': int(os.getenv('API_TIMEOUT', '30')),
            'retries': int(os.getenv('API_RETRIES', '3'))
        }
    
    def get(self, key: str) -> Optional[str]:
        """Get configuration value by key."""
        return self.config.get(key)

# Usage example
config = APIConfig()
print(f"API Base URL: {config.get('base_url')}")</code></pre>
                    </div>
                </div>

                <!-- Info Grid -->
                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-label">Size</div>
                        <div class="info-value">1,247 bytes</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Lines</div>
                        <div class="info-value">32 lines</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Author</div>
                        <div class="info-value">Anonymous</div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">Visibility</div>
                        <div class="info-value">Public</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div style="display: flex; gap: 0.5rem; margin-top: 1.5rem;">
            <button class="btn btn-outline" onclick="forkSnippet()">
                <i data-lucide="git-fork" style="width: 16px; height: 16px;"></i>
                Fork Snippet
            </button>
            <button class="btn btn-destructive" onclick="deleteSnippet()">
                <i data-lucide="trash-2" style="width: 16px; height: 16px;"></i>
                Delete
            </button>
        </div>
    </div>

    <script>
        lucide.createIcons();

        function copyCode() {
            const code = document.getElementById('snippetCode').innerText;
            navigator.clipboard.writeText(code).then(() => {
                alert('Code copied to clipboard!');
            });
        }

        function copySnippet() {
            copyCode();
        }

        function downloadCode() {
            const code = document.getElementById('snippetCode').innerText;
            const blob = new Blob([code], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'snippet.py';
            a.click();
            URL.revokeObjectURL(url);
        }

        function forkSnippet() {
            window.location.href = '/pastebin';
        }

        function deleteSnippet() {
            if (confirm('Are you sure you want to delete this snippet?')) {
                alert('Snippet deleted!');
                window.location.href = '/pastebin';
            }
        }
    </script>
</body>
</html>
